# coturn TURN-over-TLS configuration
# Dynamic values (secret, realm, external-ip) are passed via CLI in docker-compose.yml

# ── Listeners ──────────────────────────────────
# TLS listener for DPI evasion (looks like HTTPS)
tls-listening-port=5349
# Also allow plain TCP on the same port as fallback
listening-port=3478
no-udp
no-dtls

# ── Relay ──────────────────────────────────────
min-port=49152
max-port=49200

# ── Authentication ─────────────────────────────
# HMAC-based ephemeral credentials (time-limited)
use-auth-secret

# ── TLS Certificates ──────────────────────────
cert=/etc/coturn/certs/cert.pem
pkey=/etc/coturn/certs/key.pem

# ── Security ──────────────────────────────────
# Deny relay to private/loopback networks
denied-peer-ip=10.0.0.0-10.255.255.255
denied-peer-ip=172.16.0.0-172.31.255.255
denied-peer-ip=192.168.0.0-192.168.255.255
denied-peer-ip=127.0.0.0-127.255.255.255
no-multicast-peers

# ── Logging ───────────────────────────────────
log-file=stdout
